En esta iteración (Tabla \ref{table:ficha-iteracion-1}) se aborda:
\begin{itemize}
	\item Análisis y diseño de un pequeño proyecto utilizando la tecnología JOGL.
	\item Preparación del entorno de desarrollo y creación del proyecto mediante Maven.
	\item Implementación de un mini-proyecto de funcionalidad reducida empleando JOGL.
\end{itemize}




\subsubsection{Disciplina de requisitos}
\label{sec:iteracion-1-requisitos}

Se deberá elaborar un pequeña aplicación de funcionalidad reducida utilizando la librería Java OpenGL. Este mini-proyecto, que servirá como base para todo el desarrollo del motor gráfico, deberá mostrar un poliedro de seis caras en tres dimensiones y permitir que el usuario lo rote para examinarlo desde cualquier punto de vista.




\subsubsection{Disciplinas de análisis}
\label{sec:iteracion-1-analisis}

Para poder abordar el análisis de un proyecto de estas características, se ha comenzado por estudiar la librería de gráficos OpenGL y su implementación en Java: JOGL. Ha sido necesario estudiar ambas librerías ya que Java OpenGL (JOGL) es un \textit{binding} que da acceso a OpenGL pero tiene ciertas limitaciones y particularidades. La principal característica es la forma en la que JOGL implementa el hilo de ejecución sobre el cual se realizan las operaciones de \textit{pintado} de la escena.

En la figura \ref{fig:it1-jogl-usecase} se muestra el diagrama de casos de uso que corresponde en este punto del ciclo de vida del motor gráfico. Como se puede observar, se trata de un escenario muy sencillo en el que el hilo de ejecución de JOGL se encarga de pintar un cubo y el usuario tiene la posibilidad de rotarlo.

Dado el nivel de abstracción en el que se encuentra el proyecto, se ha modelado el hilo de ejecución de JOGL como un actor del sistema. Este \textit{pseudo-actor} desaparecerá en futuros diagramas de casos de uso y, de hecho, no se ha considerado en el diagrama general de casos de uso del motor gráfico (Fig. \ref{fig:cdu-graphics-engine}) que se obtuvo en la fase de inicio (Sección \ref{sec:modelo-cdu}). Su representación en este nivel tiene como único objetivo modelar un productor de información (el usuario que realiza acciones para desencadenar el cálculo de determinados parámetros de rotación del cubo) y un consumidor (el hilo de ejecución de JOGL que pinta el cubo a partir de los parámetros calculados).

\imagenBorde{Cap5//it1-jogl-usecase}{0.75}{Diagrama de casos de uso para un mini-proyecto de funcionalidad reducida, basado en JOGL}{fig:it1-jogl-usecase}

El siguiente paso consiste en modelar el diagrama de clases de análisis que permitirá comprender el funcionamiento del sistema con un poco más de detalle (Fig. \ref{fig:it1-analysis-class-diagram}). En él se observa que el usuario interactúa con el contenedor de gráficos, cuyas características serán definidas en un futuro, que a su vez se encarga de iniciar el hilo de ejecución de JOGL. Este hilo es el responsable de pintar los cubos y poner a la escucha un \textit{listener} de eventos de teclado que permitirá que el usuario rote los poliedros. Esta misma explicación se proporciona gráficamente en el diagrama de comunicación asociado (Fig. \ref{fig:it1-communication-class-diagram}), donde se indica el paso de los distintos mensajes y señales.

\imagenBorde{Cap5//it1-analysis-class-diagram}{0.7}{Diagrama de clases de análisis para un mini-proyecto de funcionalidad reducida, basado en JOGL}{fig:it1-analysis-class-diagram}

\imagenBorde{Cap5//it1-communication-class-diagram}{0.6}{Diagrama de comunicación para un mini-proyecto de funcionalidad reducida, basado en JOGL}{fig:it1-communication-class-diagram}




\subsubsection{Disciplinas de diseño}
\label{sec:iteracion-1-diseño}

Como fruto del estudio de la librería JOGL y de los diagramas de análisis elaborados en la disciplina de análisis de esta misma iteración, se obtiene el primer diagrama de clases de diseño que servirá como base para todo el motor gráfico (Fig. \ref{fig:it1-jogl-class-diagram}). En este diagrama, que hasta el momento sólo goza de las capas de presentación y dominio, es importante destacar los paquetes en los que están agrupados su diferentes clases:
\begin{itemize}
	\item \textbf{javax.media.opengl}. Este espacio de nombres está contenido en la librería de JOGL y nos proporciona la clase GLCanvas, que hereda de la clase Canvas de AWT (Abstract Window Toolkit) de Java, y la interfaz GLEventListener, que declara los métodos que se deberán implementar para poder pintar gráficos en pantalla.
	\item \textbf{com.sun.opengl.util}. Este espacio de nombres, también contenido en la librería de JOGL, proporciona la clase Animator que será la encargada de crear el hilo de ejecución de JOGL.
	\item \textbf{presentacion}. Paquete propio que contendrá una clase de tipo \textit{Window} que se encargará de configurar un GLCanvas y un Animator.
	\item \textbf{dominio}. Paquete propio con dos subpaquetes para una mejor organización de las clases del proyecto: \textbf{control}, que contendrá distintas clases de control, y \textbf{conocimiento}, que proporcionará las distintas clases de conocimiento.
\end{itemize}

\imagenBorde{Cap5//it1-jogl-class-diagram}{0.5}{Diagrama de clases de diseño  para un mini-proyecto de funcionalidad reducida, basado en JOGL}{fig:it1-jogl-class-diagram}

El diagrama de clases de diseño describe una vista estática del sistema, pero para comprender el funcionamiento del mismo es necesario especificar una vista dinámica que muestre cómo se crean los distintos objetos y cómo interactúan entre ellos. Para una mejor comprensión, esta vista se ha divido en dos diagramas de secuencia: inicialización y ejecución.

En el diagrama de secuencia de inicialización (Fig. \ref{fig:it1-jogl-initialization-sequence-diagram}) se observa qué llamadas se producen entre los distintos objetos hasta que el hilo de ejecución de JOGL entra en el bucle que le permite repintar la escena constantemente.

\imagenBorde{Cap5//it1-jogl-initialization-sequence-diagram}{0.65}{Diagrama de secuencia de la inicialización del hilo de JOGL}{fig:it1-jogl-initialization-sequence-diagram}

En el diagrama de secuencia de ejecución (Fig. \ref{fig:it1-jogl-execution-sequence-diagram}) se asume la parte de inicialización y se centra en la interacción entre objetos que se produce para pintar la escena. Ello conlleva omitir la parte que se corresponde con la figura \ref{fig:it1-jogl-initialization-sequence-diagram} y el actor que inicia la acción.

\imagenBorde{Cap5//it1-jogl-execution-sequence-diagram}{0.6}{Diagrama de secuencia de ejecución del hilo de JOGL}{fig:it1-jogl-execution-sequence-diagram}



\subsubsection{Disciplinas de implementación}
\label{sec:iteracion-1-implementacion}
%rev 13

La disciplina de implementación del mini-proyecto que se aborda en esta iteración comienza con la configuración del entorno y la creación del proyecto.

En esta primera parte se ha instalado y configurado Eclipse IDE, Maven y el plugin m2eclipse en sus versiones especificadas en la sección \ref{sec:marco}. A continuación se ha creado un proyecto Maven de tipo \textbf{maven-archetype-quickstart} y se han añadido las dependencias de JOGL necesarias (Listado \ref{lst:pom-jogl}). Puesto que estas dependencias no se encuentran alojadas en los repositorios generales de Maven, es necesario añadirlas manualmente al repositorio local. Para evitar conflictos de versiones, las dependencias que se han utilizado en este PFC se proporcionan en el DVD adjunto bajo el directorio \textit{desglosa\textbackslash{}builds\textbackslash{}jogamp\textbackslash{}deployment\textbackslash{}webstart\textbackslash{}archive}, junto con un pequeño fichero de texto que detalla cómo realizar la operación.

\lstinputlisting[language=XML,caption={Configuración de pom.xml para añadir JOGL como dependencia del proyecto},label=lst:pom-jogl]{snippets//maven-jogl.txt}

A continuación se implementan las clases diseñadas en esta misma iteración. El resultado es una pequeña ventana que pinta, de un modo muy básico y sin apenas calidad gráfica, una torre de color rojo y una torre de color verde sobre un suelo gris (Fig. \ref{fig:it1-screenshot-joglworld}).

\imagenBorde{Cap5//it1-screenshot-joglworld}{0.55}{Resultado de la disciplina de implementación de la iteración 1}{fig:it1-screenshot-joglworld}