\chapter{Motivación y Objetivos del Proyecto}
\label{ch:motivacionyobjetivos}

% Anteproyecto más algún detalle

% Concretar y exponer el problema a resolver describiendo el entorno de trabajo, la situación y detalladamente qué se pretende obtener. Limitaciones y condicionantes a considerar para la resolución del problema (lenguaje de construcción, equipo físico, equipo lógico de base o de apoyo, etc.).

\section{Motivación}

A medida que la globalización ha ido afectando a la industria del software, las empresas han tenido que ir adaptando sus metodologías y procesos de gestión de productos software\footnote{Se habla de productos software ya que éstos pueden ser fragmentados en diferentes proyectos o descomponerse en un conjunto de fases o etapas en función de la metodología utilizada en su ciclo de vida.} para adaptarse a las nuevas tendencias. Inicialmente, estas metodologías estaban adecuadas para gestionar proyectos o productos tradicionales que se desarrollaban en una única ubicación (Fig. \ref{fig:typology-projects-locations}) \cite{evaristo1999tpm}, pero hoy en día estos trabajos se realizan de forma distribuida, en la que los equipos de trabajo no se encuentran co-localizados. Esta descentralización complica la gestión del software en general y de la calidad del software en particular, ya que es necesario controlar medidas e indicadores de calidad de las organizaciones participantes, sus factorías involucradas y los proyectos o partes de proyectos que se están llevando a cabo en cada una.

\imagenBorde{Cap2//typology-projects-locations}{0.6}{Clasificación de proyectos según localizaciones.}{fig:typology-projects-locations}

Según ha explicado uno de los responsables del proyecto en \textbf{Indra Software Labs S.L.}, los responsables a cargo de proyectos disponen de un conjunto de hojas de cálculo en las cuales anotan, manipulan y consultan los datos e información que consideran útil y oportuna. Estas hojas de cálculo no siguen ningún modelo o estándar, por lo que no existe compatibilidad alguna entre ellas. Aunque rudimentario, este método es factible si no es necesario coordinarse con otros jefes de proyecto, pero pueden surgir numerosos problemas de comprensión y entendimiento si se comparte con múltiples personas a cargo de proyectos que conforman el mismo producto final (Fig. \ref{fig:desorden}).

\imagenBorde{Cap2//desorden}{0.5}{Datos desordenados relacionados con software global y medidas de calidad del software.}{fig:desorden}

La motivación de este PFC viene dada por la necesidad de una herramienta que establezca un modelo de representación para las entidades que intervienen en el desarrollo global. En este caso de estudio, las \textbf{principales entidades} son \textit{compañías}, \textit{factorías}, \textit{proyectos} y \textit{subproyectos} (Fig. \ref{fig:hierarchy}). Así, los usuarios de la herramienta podrán aportar, modificar y consultar datos relativos a medidas e indicadores de las entidades en base a dicho modelo. Acto seguido, será posible definir y realizar las representaciones visuales que se consideren oportunas, evitando los problemas que se han descrito anteriormente.

\imagenBorde{Cap2//hierarchy}{0.5}{Resumen de la jerarquía de entidades que intervienen en el desarrollo global.}{fig:hierarchy}


\section{Objetivos}

El objetivo principal del PFC consiste en elaborar una \textbf{herramienta} que permita la visualización de medidas e indicadores software utilizados en el contexto empresarial bajo el paradigma del \textbf{Desarrollo Global de Software}.

Dichas medidas e indicadores representarán la información que se considere importante como -por ejemplo- la productividad de las fábricas de software, las incidencias que han surgido a lo largo del ciclo de vida de un proyecto, o la \textit{portabilidad} de un subproyecto determinado. Los datos relevantes y susceptibles de representación visual de cada entidad pueden variar a lo largo del tiempo, es decir, puede producirse la adición de un conjunto de características para una o varias entidades. Además, puede suceder que en un futuro se deseen añadir más entidades para modelar un entorno más complejo. Por esta razón, es requisito indispensable que la interfaz de usuario se adapte automáticamente, en la medida de lo posible, a los cambios realizados en la lógica de negocio de la herramienta.

Por otro lado, se desarrollará un \textbf{motor de gráficos 3D} que deberá ser integrado en la herramienta para proporcionar un conjunto de modelos gráficos capaces de escenificar las medidas e indicadores definidos previamente. Esta escenificación, que permitirá que el usuario navegue a través del entorno como si de un mundo virtual se tratase, se realizará sobre las \textit{dimensiones} de un modelo gráfico. Una \textbf{dimensión} es aquella propiedad del modelo gráfico susceptible de asignarle un valor. Del mismo modo que en el caso de las entidades, los modelos gráficos también pueden experimentar variaciones si la empresa lo requiere, así como puede ser necesario que se extienda el número de dimensiones de un modelo existente. Por ello, y una vez más, es necesario que la interfaz gráfica de usuario vuelva a adaptarse a dichos cambios.

Dada la situación en la que tanto los atributos de las entidades como las dimensiones de los modelos pueden variar a lo largo del tiempo, es necesario que la herramienta permita crear \textit{perfiles de visualización}. Un \textbf{perfil de visualización} definirá qué modelo gráfico será utilizado para representar una entidad determinada, permitiendo así que el usuario interactúe con el modelo para desglosar información cada vez más específica (\textit{niveles de visualización}). Además, deberá contener información relativa a las \textbf{asociaciones} que se desean establecer entre los atributos de la entidad y las dimensiones del modelo seleccionado (Fig. \ref{fig:mapeo}). Por otro lado, el perfil podrá contener información complementaria que será mostrada dentro del modelo gráfico a modo de \textit{leyenda informativa}. Por último, cabe destacar que para una misma entidad se pueden configurar múltiples perfiles de visualización independientes entre sí -asociando diferentes modelos gráficos y dimensiones- a fin de definir distintas vistas que muestren información más específica o de la misma familia. Esta característica es útil cuando se quiere definir un perfil para cada característica de un modelo de calidad, representando sus subcaracterísticas sobre las dimensiones del modelo gráfico.

\imagenBorde{Cap2//mapeo}{0.65}{Esquema que representa las asociaciones entre los atributos de una entidad y las dimensiones de un modelo gráfico.}{fig:mapeo}

Los \textbf{niveles de visualización} son un aspecto importante, ya que establecen la navegabilidad del usuario en el sistema para ir desglosando información cada vez más específica. Por ejemplo, a \textit{nivel de fábrica} puede ser interesante conocer en qué proyectos está colaborando una determinada factoría; a \textit{nivel de proyecto} se podría conocer si las fábricas que colaboran están especializadas en el mercado del proyecto; y, a \textit{nivel de subproyecto} se podría comprobar qué valores toman un conjunto de medidas de calidad. No obstante, qué información se muestra en cada nivel y cómo se muestra, depende de la configuración del perfil de visualización seleccionado.

Para permitir que las distintas organizaciones y fábricas involucradas en un conjunto común de proyectos puedan utilizar el sistema de visualización y manejar la información globalizada, la herramienta será diseñada como una \textbf{aplicación web} con \textit{internacionalización}. Estas dos características son muy importantes ya que permiten que sea accesible desde cualquier navegador web convencional y que sea mostrada en el idioma configurado en dicho navegador.

El grado de internacionalización depende de que previamente se haya traducido el fichero de \textit{localización} correspondiente. Este fichero consiste en un archivo en \textit{texto plano} que contiene un conjunto de etiquetas cuyos valores deberán ser traducidos al idioma deseado. Por defecto, se ofrecerán los ficheros correspondientes a los idiomas Inglés (Reino Unido) y Español (España).

Es importante destacar que este PFC se centra en la visualización y personalización de la visualización. Por lo tanto, no proporcionará medios para calcular los valores de las medidas e indicadores, aunque sí incorporará una interfaz gráfica a modo de formulario en la que los usuarios podrán aportar dichos datos.


\section{Entorno y requisitos}

Para lograr obtener un sistema que satisfaga los requisitos descritos anteriormente, será necesaria la creación de dos proyectos: \textit{Desglosa Graphics Engine} y \textit{Desglosa Web}. Ambos proyectos estarán basados en tecnología \textbf{Java} y su ciclo de vida será gestionado mediante \textbf{Maven}.


\subsection{Desglosa Graphics Engine}

Este proyecto consiste en un \textbf{motor gráfico basado en OpenGL} que deberá ser integrado en la aplicación web. Las alternativas de integración que se han contemplado se basan en el uso de un \textit{canvas} de HTML5 (\textit{HyperText Markup Language}), que haría posible el uso de la tecnología WebGL, o un \textit{applet}, que nos permitiría desarrollar el motor gráfico con alguna librería basada en Java que permita acceder a OpenGL.

La primera alternativa ha sido desechada ya que cuando se requería comenzar con el desarrollo de este proyecto, el equipo a cargo de WebGL aún no había publicado la primera especificación del API. Esta publicación se produjo en 10 de Febrero de 2011. Como consecuencia, las versiones estables de los navegadores web tradicionales (Mozilla Firefox, Google Chrome, Internet Explorer, etcétera) aún no implementaban dicha tecnología y la documentación acerca de la misma no era muy abundante. Por esta razón, se optó por la segunda alternativa: utilizar una librería basada en Java e integrar el motor gráfico en la aplicación web mediante un applet.

Del conjunto de librerías basadas en Java que se han contemplado para generar gráficos 3D mediante OpenGL, se ha seleccionado \textit{JOGL (Java OpenGL)}. \textbf{JOGL} es un proyecto gratuito y de código libre, con licencia BSD (Berkeley Software Distribution) y goza de la potencia necesaria para un proyecto de estas características.

El motor gráfico dispondrá de un conjunto de modelos gráficos que serán utilizados en una escena que tratará de simular la metáfora de una ciudad. La arquitectura del proyecto permitirá que el equipo encargado del mantenimiento de la aplicación puedan añadir nuevos modelos y vistas de un modo sencillo.

Un modelo gráfico estará definido en una clase Java. Como cualquier clase, ésta deberá tener un conjunto de atributos que definan el estado de los objetos que se \textit{instancien}. Algunos de estos atributos tendrán la finalidad de ser utilizados como dimensiones del modelo. Una dimensión de un modelo es un atributo al cual se le puede asignar un valor para obtener una representación visual. Para diferenciar qué atributos del modelo pueden ser utilizados como dimensiones y cuáles no, así como para dotar la dimensión de la semántica necesaria, se creará una \textbf{anotación personalizada de Java}. Gracias a esta anotación y con el uso de un pequeño \textbf{analizador de anotaciones} que utiliza \textbf{Java API Reflection} (también conocido como \textit{Introspección}), será posible analizar la clase anotada en tiempo de ejecución para proporcionar la información necesaria a la interfaz gráfica de usuario y que ésta se configure automáticamente.

Por último, para tratar que el motor gráfico no tenga ningún tipo de dependencia con el sistema que lo utilice, los gráficos serán generados a partir de una cadena de texto. Esta cadena de texto será utilizada como entrada de datos, que serán procesados según proceda y, finalmente, los resultados serán mostrados en forma de gráficos 3D. El formato de la cadena de texto debe ser \textbf{JSON} (\textit{JavaScript Object Notation}) (Listado \ref{json-example}) y responder a una estructura definida que será detallada en los sucesivos capítulos de este documento.

\begin{lstlisting}[caption={Ejemplo de texto en formato JSON (http://json.org/example.html)},label=json-example]
{"menu": {
  "id": "file",
  "value": "File",
  "popup": {
    "menuitem": [
      {"value": "New", "onclick": "CreateNewDoc()"},
      {"value": "Open", "onclick": "OpenDoc()"},
      {"value": "Close", "onclick": "CloseDoc()"}
    ]
  }
}}
\end{lstlisting}


\subsection{Desglosa Web}

Sintetizando el apartado anterior, se destaca que el motor gráfico genera gráficos 3D a partir de una cadena de texto en formato JSON. Esto implica que el motor gráfico no maneja ningún tipo de lógica de negocio relativa al contexto del desarrollo global. Por ello, toda la lógica de negocio relativa al desarrollo global, así como su control y persistencia, está contenida en la aplicación web.

La aplicación web ha sido diseñada de tal forma que de lugar a una herramienta profesional y de calidad. Para lograrlo se han utilizado tecnologías y \textit{frameworks} que actualmente se utilizan en el mundo empresarial. En la sección \ref{sec:marco} se puede encontrar una lista detallada de las mismas y con qué propósitos han sido utilizadas.

Este proyecto, a parte de permitir la manipulación de la información que maneja mediante formularios, debe implementar dos funcionalidades muy importantes: la de configuración de perfiles y la de visualización del contexto de desarrollo global.


\subsubsection{Configuración de perfiles}

Cuando el usuario desee configurar un perfil, deberá seleccionar qué entidad quiere representar sobre qué modelo gráfico. Las entidades que intervienen en el desarrollo global -compañías, factorías, proyectos y subproyectos- tienen un conjunto de atributos que configuran su estado. Algunos de estos atributos pueden ser susceptibles de ser representados visualmente, por ejemplo las medidas e indicadores de calidad. Para diferenciar qué atributos son susceptibles de representación visual y cuáles no, será necesario definir otra \textbf{anotación personalizada de Java} y su correspondiente \textbf{analizador de anotaciones} para hacer nuevamente uso de la \textbf{introspección}. Este tipo de anotaciones, que difiere de las anotaciones del motor gráfico ya que requieren un tratamiento particular, permitirá que la aplicación web analice la clase Java de la entidad en tiempo de ejecución para adaptar su interfaz gráfica de usuario. Del mismo modo, se utilizará el analizador proporcionado por el motor gráfico para analizar las dimensiones del modelo seleccionado y adaptar nuevamente la interfaz gráfica de usuario.

En este momento, el usuario obtendrá una lista de los atributos de la entidad y una lista de las dimensiones del modelo seleccionados. A continuación podrá establecer las asociaciones y configuraciones que estime oportunas entre la entidad y el modelo gráfico, así como suministrar información adicional para mostrar una leyenda informativa, el nombre del perfil y una breve descripción. Por último, el perfil se hará persistente en formato XML (Extensible Markup Language) en el servidor de la aplicación web.


\subsubsection{Visualización}

Esta funcionalidad proporciona dos vistas: la primera de ellas consiste en un mapa de Google Maps sobre el cual se irán posicionando las factorías de software que proceda en cada situación; la segunda cargará un applet con el motor gráfico y se mostrará la información que el usuario desee en base al nivel de visualización y el perfil seleccionado. El usuario podrá interactuar con los elementos mostrados en el motor gráfico para navegar por los distintos niveles de visualización y desglosar información cada vez más específica.

La mayor dificultad para generar una escena visual se establece dada la gran capacidad de personalización de perfiles que permite la herramienta. Como se ha podido apreciar a lo largo de la lectura, los usuarios pueden representar cualquier entidad del desarrollo global sobre cualquier modelo gráfico y configurar múltiples tipos de asociaciones. Toda esta información es guardada en un fichero XML pero, ¿cómo puede el sistema conocer qué tipo de objetos debe \textit{instanciar} y a qué métodos llamar para obtener los valores de las entidades y aplicarlos sobre las dimensiones de los objetos? La respuesta, una vez más, es \textbf{Java API Reflection} (método de \textit{reflexión} o \textit{introspección}).

\section{Marco tecnológico de trabajo}
\label{sec:marco}

A continuación, y a modo de síntesis, se listarán las herramientas y tecnologías empleadas a lo largo del ciclo de vida de este proyecto:
\begin{itemize}
	\item \textbf{Eclipse} EE Helios: se trata del Entorno de Desarrollo Integrado (en inglés, IDE o \textit{Integrated Development Environment}) que se ha utilizado para implementar los dos proyectos.
	\item \textbf{Maven} 2.2.1: esta herramienta sirve para gestionar las dependencias y el ciclo de vida de proyectos Java. Se ha utilizado por medio de un \textit{plugin} de Eclipse denominado \textbf{m2eclipse}.
	\item \textbf{Subversion}: constituye el sistema de control de versiones que se ha empleado a lo largo del desarrollo del software.
	\item \textbf{MySQL Community Server} 5.1.11: es el sistema gestor de bases de datos que se utilizará para hacer persistentes los datos que corresponda.
	\item \textbf{Apache Tomcat} 7.0.2 y \textbf{Jetty} 6.1.5: son los dos servidores web y contenedores de \textit{servlets} y páginas JSP (\textit{Java Server Pages}) que han sido utilizados tanto en el desarrollo como en el despliegue de la herramienta.
	\item \textbf{Spring} 2.5.6:
	\item \textbf{Spring Security} 2.0.4:
	\item \textbf{Struts} 2.2.3:
	\item \textbf{Struts-Menu} 2.4.3:
	\item \textbf{JSON-Lib} 2.4:
	\item \textbf{Struts2-JQuery} 3.1.0: \textbf{jQuery} 1.5.2  y \textbf{jQuery UI} 1.8.14 
	\item \textbf{Google Maps API} v2:
	\item \textbf{Displaytag} 1.2:
	\item \textbf{Sitemesh} 2.4.2:
	\item \textbf{CSS3}:
	\item \textbf{HTML5}:
	\item \textbf{JSP} 2.0:
	\item \textbf{JavaScript}:
	
	\item \textbf{Java Annotations}:
	\item \textbf{Java Reflection API}: (parsers y generar objetos en tiempo de ejecucion)
	\item \textbf{JAXB API} 2.2.4:
	\item \textbf{Hibernate} 3.5.4:
	\item \textbf{JPA} 2.0:
	\item \textbf{Java OpenGL} 2.0:
	
	\item \textbf{Inkscape} 0.48:
	\item \textbf{GIMP} 2.6.11:
	\item \textbf{MySQL Workbench} 5.2 CE:
	\item \textbf{Visual Paradigm} 8.0:
	\item \textbf{\LaTeX{}}:
	\item \textbf{BibTeX}:
\end{itemize}

\begin{itemize}
	\item la persistencia se lleva a cabo mediante \textbf{Hibernate} y anotaciones \textbf{JPA}.
	\item la seguridad de acceso a páginas y la política de Control de Acceso Basado en Grupos (en inglés, \textit{Group-Based Access Control} o \textit{GBAC}) se implementa mediante \textbf{Spring Security}.
	\item la instanciación de acciones de Struts2 y los DAO (Data Access Object) se realiza mediante Spring.
	\item La configuración de menús dinámicos en base al rol del usuario se realiza mediante Struts-menu.
\end{itemize}