<!DOCTYPE project [
    <!ENTITY config SYSTEM "./config.xml">
    <!ENTITY login SYSTEM "./login.xml">
]>
<project name="Desglosa Webtest suite" basedir="." default="all"> 
    <!-- Use i18n bundle, 2nd one listed is the default -->
    <property file="\${basedir}/target/${webapp.name}/WEB-INF/classes/ApplicationResources_${user.language}.properties"/>
    <property file="\${basedir}/target/${webapp.name}/WEB-INF/classes/ApplicationResources.properties"/>

    <!-- runs all targets -->
    <target name="all" 
        depends="Login,Logout"
        description="Call and executes all test cases (targets)"/>
    
    <!-- Login to the application -->
    <target name="Login" description="Runs login test and verifies Main Menu's Title">
        <webtest name="login">
            &config;
            <steps>
                &login;
            </steps>
        </webtest>
    </target>

    <!-- Logout of the application -->
    <target name="Logout" description="Runs logout test and verifies Login's Title">
        <webtest name="logout">
            &config;
            <steps>
                &login;
                <invoke description="get Logout Page" url="/logout"/>
                <verifytitle description="we should see the Home Page again" text=".*${desglosa.title}.*" regex="true"/>
            </steps>
        </webtest>
    </target>
</project>
