% ----------------------------------------
% Paquete personalizado para configurar documentos de tipo article
% ----------------------------------------

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{customarticle}

% =======================
% Declaración de opciones
% =======================

% La opción spanish se utiliza para que el identificador
% de la stablas sea la palabra "Tabla" en vez de "Cuadro".
\newif\ifOrdenes@spanish \Ordenes@spanishfalse
\DeclareOption{spanish}{\Ordenes@spanishtrue}

% La opción caption se utiliza para cambiar el estilo
% de las leyendas de tablas y figuras.
\newif\ifOrdenes@caption \Ordenes@captionfalse
\DeclareOption{caption}{\Ordenes@captiontrue}

% La opción counter se utiliza para redefinir los contadores de las leyendes
% de figuras y tablas, ligándolos al contador de secciones.
\newif\ifOrdenes@counter \Ordenes@counterfalse
\DeclareOption{counter}{\Ordenes@countertrue}

% La opción title se utiliza para redefinir el estilo de los títulos de las 
% secciones.
\newif\ifOrdenes@title \Ordenes@titlefalse
\DeclareOption{title}{\Ordenes@titletrue}

% La opción fancy se utiliza para personalizar el encabezado y pie de página. 
\newif\ifOrdenes@fancy \Ordenes@fancyfalse
\DeclareOption{fancy}{\Ordenes@fancytrue}

% Opciones no válidas
\DeclareOption*{\PackageWarningNoLine{customarticle}{Unknown option \CurrentOption}}

% ================================
% Procesamiento y código principal
% ================================
\ProcessOptions

% Opción spanish
\ifOrdenes@spanish 
	\addto\captionsspanish{
  	\def\listtablename{Índice de tablas}%
    \def\tablename{Tabla}} 
\fi

% Opción caption
\ifOrdenes@caption
	\RequirePackage[hang,large,bf]{caption}
\fi

% Opción counter
\ifOrdenes@counter
	\RequirePackage{chngcntr}
	\counterwithin*{section}{part}
	\counterwithin{figure}{section}
	\counterwithin{table}{section}
	\counterwithin{equation}{section}
\fi

% Opción title
\ifOrdenes@title
	\RequirePackage{titlesec}
	\titleformat{\section}
		{\bfseries\LARGE\scshape}
		{\LARGE\thesection. }
		{1.5pt}
		{}
		
	\titleformat{\subsection}
		{\bfseries\Large}
		{\Large\thesubsection. }
		{0.5pt}
		{}
		
	\titleformat{\subsubsection}
		{\itshape\bfseries\large}
		{\large\thesubsubsection. }
		{0.5pt}
		{}
\fi

% Opción fancy
\ifOrdenes@fancy
	\RequirePackage{fancyhdr}
	\chead{}
	\fancyhead[RO,LE]{}
	\fancyhead[LO,RE]{}
	\cfoot{}
	\fancyfoot[RO,RE]{\thepage}
	\fancyfoot[LO,LE]{\nouppercase{\leftmark}}	
\else
	\let\ps@fancy\ps@plain
\fi

% Órdenes para ajustar los márgenes del documento
\setlength{\headheight}{15pt} 
\setlength{\headsep}{8mm}
\setlength{\footskip}{30pt}
\setlength{\topmargin}{-15pt} 
\setlength{\textheight}{\dimexpr \paperheight-3cm-\headheight-\headsep-\footskip-1.5cm}
\setlength{\textwidth}{\dimexpr \paperwidth-2.25cm*2}
\setlength{\oddsidemargin}{\dimexpr 2.25cm-1in}
\setlength{\evensidemargin}{\dimexpr 2.25cm-1in}
\setlength{\pdfpagewidth}{\paperwidth}
\setlength{\pdfpageheight}{\paperheight}